<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script th:src="@{/styles/tailwind.js}"></script>
	<link rel="shortcut icon" th:href="@{/logo.svg}" type="svg/x-icon">
	<title>Transacciones</title>
</head>

<body>
	<nav class="bg-white px-2 sm:px-4 py-2.5 fixed w-full z-20 top-0 left-0 border-b border-gray-200">
		<div class="container flex flex-wrap items-center justify-between mx-auto">
			<a href="/dashboard" class="flex items-center">
				<img src="https://flowbite.com/docs/images/logo.svg" class="h-6 mr-3 sm:h-9" alt="Logo">
				<span class="self-center text-xl font-semibold whitespace-nowrap">BankSpring</span>
			</a>
			<div class="flex md:order-2">
				<form action="logout" method="post">
					<button id="logout" type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-3 md:mr-0">Cerrar sesión</button>
				</form>
			</div>
			<div class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1" id="navbar-sticky">
				<ul class="flex flex-col p-4 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium md:border-0 md:bg-white">
					<li><a href="/dashboard" class="block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0">Inicio</a> </li>
					<li><a href="/movimientos" class="block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0">Movimientos</a> </li>
					<li><a href="/transacciones" class="block py-2 pl-3 pr-4 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0">Transacciones</a> </li>
					<li><a href="/transferencias" class="block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0">Transferencias</a> </li>
				</ul>
			</div>
		</div>
	</nav>

	<h1 class="mb-4 mt-32 text-center text-2xl font-bold tracking-tight leading-none text-gray-900">Mis transacciones</h1>
	
	<div id="messages" class="w-3/4 mx-auto mt-12"></div>

	<div id="content" class="mt-12 w-3/4 mx-auto flex flex-col gap-7 items-center">
		<div class="mx-auto w-3/4">
			<label for="operacion" class="block mb-2 text-sm font-medium text-gray-900">Seleccione la operación que desea realizar</label>
			<select id="operacion" name="operacion" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" required>
				<option selected>Seleccione una operación</option>
				<option value="Deposito">Deposito</option>
				<option value="Retiro">Retiro</option>
			</select>
		</div>
		<form id="transaccion" method="post" class="mx-auto w-3/4">
			<div class="mb-6">
				<label for="numeroDeCuenta" class="block mb-2 text-sm font-medium text-gray-900">Seleccione la cuenta</label>
				<select id="numeroDeCuenta" name="numeroDeCuenta" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" required>
					<option selected disabled value="">Seleccione una cuenta</option>
					<option th:each="cuenta : ${cuentas}" th:value="${cuenta.numeroDeCuenta}" th:text="|${cuenta.numeroDeCuenta} - Saldo disponible $${cuenta.saldo}|"></option>
				</select>
			</div>
			<div class="mb-6">
				<label for="monto" class="block mb-2 text-sm font-medium text-gray-900">Monto</label>
				<input type="number" id="monto" step="0.1" name="monto" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="$0.0" required>
			</div>
			<button type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center">Realizar transacción</button>
		</form>
	</div>

	<div class="w-full flex flex-col justify-center items-center gap-2 mt-10">
		<img src="https://flowbite.com/docs/images/logo.svg" class="h-6 mr-3 sm:h-9" alt="Logo">
		<span class="self-center text-xl font-semibold whitespace-nowrap">BankSpring</span>
		<p>¡Siempre contigo!</p>
	</div>

	<script>	
		const operacion = document.querySelector("#operacion");
		const transaccion = document.querySelector("#transaccion");
		const messagesContainer = document.querySelector("#messages");

		operacion.onchange = (event) => {
			event.target.value === "Deposito" ? 
				transaccion.action = "deposito" : 
				transaccion.action = "retiro";
		}

		transaccion.onsubmit = (event) => {
			event.preventDefault();

			if (operacion.value === "Seleccione una operación") {
				messagesContainer.innerHTML += `
					<div class="w-3/4 mx-auto p-4 mb-2 text-sm text-red-700 bg-red-100 rounded-lg mb-10">
						<span class="font-medium">El campo de tipo de operación es obligatorio.</span>
					</div>
				`;

				setTimeout(() => {
					messagesContainer.innerHTML = ``;
				}, 3000);
			}
		}

	</script>
</body>

</html>